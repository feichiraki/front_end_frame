## 在Xtx-Shop中开发时遇到的问题

#### 1、关于vite环境下使用`import.meta`

<img src="遇到的问题.assets/image-20240224171634270.png" alt="image-20240224171634270" style="zoom:67%;" />

解决：

```json
// tsconfig.json
{
    "compilerOptions": {
+        "module": "ESNext",
+        "moduleResolution": "Node",
    }
}
```



#### 2、TS声明的类型变量在接收后端返回的数据为什么超出范围不报错

原因在于 TypeScript 是一种静态类型检查工具，而 Vue 的模板和 JavaScript 中的对象是动态的。

在 TypeScript 中定义的类型只在编译时起作用，而在运行时，JavaScript 对象的结构可以自由地添加额外的属性而不会触发类型检查错误。

当您在 Vue 组件中接收后端返回数据并将其赋值给 `goodsDetail` 变量时，Vue 和 TypeScript 并不会强制限制数据结构要完全匹配 `GoodsResult` 中定义的类型。这种动态性和灵活性使得在实际开发中更容易处理各种情况，但也需要开发者自行确保数据的正确性和一致性。



#### 3、VScode编码问题

**在 VS Code 中写代码时，有时候可能会遇到代码修改后没有实时生效，需要重启 VS Code 才能看到想要的效果的情况**。这可能是由于一些缓存、插件或设置问题导致的。以下是一些可能的原因和解决方法：

1. **缓存问题**：有时候 VS Code 会缓存一些文件或数据，导致修改后并没有立即生效。你可以尝试在 VS Code 中清除缓存，方法是按下 `Ctrl + Shift + P` 打开命令面板，然后输入 `Reload Window` 或 `Developer: Reload Window`，重启 VS Code 窗口。
2. **插件问题**：某些插件可能会导致 VS Code 的表现异常，包括代码修改不能立即生效的情况。可以尝试禁用一些插件，特别是与编辑器自动刷新、代码高亮等相关的插件，看看是否有改善。
3. **文件监视器问题**：VS Code 使用文件监视器来监视文件的变化并实时更新编辑器。有时监视器可能会出现问题，导致代码修改后不能及时生效。你可以尝试在 VS Code 设置中搜索 `Files: Auto Save` 并将其设置为 `afterDelay` 或 `onWindowChange`，看看是否有改善。
4. **TypeScript 缓存问题**：如果你在 Vue 项目中使用了 TypeScript，并且修改了类型声明文件，有时候 TypeScript 的缓存可能会导致类型定义不会立即生效。你可以尝试在 TypeScript 编译选项中添加 `--noEmit`，这将禁用 TypeScript 的缓存功能。
5. **检查文件保存设置**：确保你在修改代码后及时保存文件。VS Code 默认会自动保存文件，但如果设置为手动保存，可能会导致修改不能立即生效。

通过以上方法，你应该可以尝试解决 VS Code 中代码修改不立即生效的问题。如果问题仍然存在，可以尝试更新 VS Code 到最新版本，或者查看 VS Code 的官方文档或社区论坛以获取进一步帮助。



#### 4、禁用TS缓存

要在 TypeScript 中禁用缓存，可以通过以下几种方式实现：

1. **使用 TypeScript 编译选项**：在 TypeScript 的编译选项中添加 `--noEmit` 选项可以禁用 TypeScript 的缓存。`--noEmit` 选项告诉 TypeScript 编译器只进行类型检查，而不生成任何输出文件。你可以在 TypeScript 项目的 tsconfig.json 文件中添加 `"noEmit": true` 来实现禁用缓存。

```json
{  
    "compilerOptions":
    { 
        "noEmit": true  
    } 
} 
```

1. **使用 tsc 命令**：在命令行中使用 tsc 命令编译 TypeScript 文件时，可以添加 `--noEmit` 选项来禁用缓存。例如：

```bash
tsc --noEmit yourFile.ts 
```

2. **使用 vscode-typescript 插件**：如果你在 VS Code 中使用 TypeScript，可以安装 vscode-typescript 插件，这个插件提供了一些设置选项用来控制 TypeScript 的行为。在 VS Code 设置中搜索 `typescript.tsserver.useSeparateSyntaxServer`，将其设置为 `true` 可以尝试禁用缓存。

以上是几种常见的方法来禁用 TypeScript 缓存。如果你仍然遇到缓存问题，可以尝试结合这些方法进行操作，看看能否解决你的问题。